<div class="body">
    <!-- Section to display the list of existing social links -->
    <div class="list-container">
        <h2>Social Media Links</h2>
        <div *ngIf="isLoading">Loading links...</div>
        <div *ngIf="errorMessage" class="message error">{{ errorMessage }}</div>
        <div *ngIf="!isLoading && contacts.length === 0">No links found. Add one below!</div>

        <div class="contact-list" *ngIf="!isLoading && contacts.length > 0">
            <div class="list-item" *ngFor="let contact of contacts">
                <img [src]="contact.socialMediaiconImg" alt="{{ contact.name }} icon" class="social-icon">
                <div class="contact-info">
                    <h3 class="list-item-title">{{ contact.name }}</h3>
                    <a [href]="contact.socialMediaLink" target="_blank" class="list-item-link">{{ contact.socialMediaLink }}</a>
                </div>
                <div class="list-item-actions">
                    <button type="button" class="btn-small btn-edit" (click)= "editContact(contact)">Edit</button>
                    <button type="button" class="btn-small btn-delete" (click)= "deleteContact(contact._id)">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Section for the Add/Edit form -->
    <div class="form-container">
      <form [formGroup]="myForm" (ngSubmit)="submitForm()">
        <h2>{{ isEditMode ? 'Edit Social Link' : 'Add New Social Link' }}</h2>
        
        <!-- Social Media Name -->
        <div class="form-group">
          <label for="name">Name</label>
          <input type="text" id="name" placeholder="e.g., GitHub, LinkedIn" formControlName="name">
          <div class="msg" *ngIf="myForm.get('name')?.invalid && myForm.get('name')?.touched">
            <span>Name is required.</span>
          </div>
        </div>

        <!-- Social Media Link -->
        <div class="form-group">
          <label for="socialMediaLink">URL</label>
          <input type="url" id="socialMediaLink" placeholder="https://github.com/..." formControlName="socialMediaLink">
          <div class="msg" *ngIf="myForm.get('socialMediaLink')?.invalid && myForm.get('socialMediaLink')?.touched">
            <span>A valid URL is required.</span>
          </div>
        </div>

        <!-- Icon Image URL -->
        <div class="form-group">
          <label for="socialMediaiconImg">Icon Image URL</label>
          <input type="url" id="socialMediaiconImg" placeholder="https://example.com/icon.svg" formControlName="socialMediaiconImg">
           <div class="msg" *ngIf="myForm.get('socialMediaiconImg')?.invalid && myForm.get('socialMediaiconImg')?.touched">
            <span>A valid icon URL is required.</span>
          </div>
        </div>
        
        <div class="form-group text-center form-actions">
          <input type="submit" [value]="isEditMode ? 'Update Link' : 'Save Link'" [disabled]="myForm.invalid"/>
          <button *ngIf="isEditMode" type="button" class="btn-secondary" (click)="resetForm()">Cancel Edit</button>
        </div>
      </form>
    </div>
</div>