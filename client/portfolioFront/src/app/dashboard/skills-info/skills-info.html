<div class="body">
    <!-- Section to display the list of existing skills -->
    <div class="list-container">
        <h2>Existing Skills</h2>
        <div *ngIf="isLoading">Loading skills...</div>
        <div *ngIf="errorMessage" class="message error">{{ errorMessage }}</div>
        <div *ngIf="!isLoading && skills.length === 0">No skills found. Add one below!</div>

        <div class="skills-list" *ngIf="!isLoading && skills.length > 0">
            <div class="list-item" *ngFor="let skill of skills">
                <img [src]="skill.iconimgUrl" alt="{{ skill.name }} icon" class="skill-icon">
                <div class="skill-info">
                    <div class="list-item-header">
                        <h3 class="list-item-title">{{ skill.name }}</h3>
                        <span class="skill-level-text">{{ skill.level }}%</span>
                    </div>
                    <div class="skill-level-bar-container">
                        <div class="skill-level-bar" [style.width.%]="skill.level"></div>
                    </div>
                </div>
                <div class="list-item-actions">
                    <button type="button" class="btn-small btn-edit" (click)="editSkill(skill)">Edit</button>
                    <button type="button" class="btn-small btn-delete" (click)="deleteSkill(skill._id)">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Section for the Add/Edit form -->
    <div class="form-container">
      <form [formGroup]="myForm" (ngSubmit)="submitForm()">
        <h2>{{ isEditMode ? 'Edit Skill' : 'Add New Skill' }}</h2>
        
        <!-- Skill Name Input -->
        <div class="form-group">
          <label for="name">Skill Name</label>
          <input type="text" id="name" placeholder="e.g., Angular" formControlName="name">
          <div class="msg" *ngIf= "myForm.get('name')?.invalid && myForm.get('name')?.touched">
            <span>Skill name is required.</span>
          </div>
        </div>

        <!-- Icon Image URL Input -->
        <div class="form-group">
          <label for="iconimgUrl">Icon Image URL</label>
          <input type="url" id="iconimgUrl" placeholder="https://example.com/icon.svg" formControlName="iconimgUrl">
           <div class="msg" *ngIf="myForm.get('iconimgUrl')?.invalid && myForm.get('iconimgUrl')?.touched">
            <span>A valid icon URL is required.</span>
          </div>
        </div>
        
        <!-- Proficiency Level Slider -->
        <div class="form-group">
          <label for="level">Proficiency Level: {{ myForm.get('level')?.value }}%</label>
          <input type="range" id="level" min="0" max="100" class="slider" formControlName="level">
        </div>
        
        <div class="form-group text-center form-actions">
          <input type="submit" [value]="isEditMode ? 'Update Skill' : 'Save Skill'" [disabled]="myForm.invalid"/>
          <button *ngIf="isEditMode" type="button" class="btn-secondary" (click)="resetForm()">Cancel Edit</button>
        </div>
      </form>
    </div>
</div>