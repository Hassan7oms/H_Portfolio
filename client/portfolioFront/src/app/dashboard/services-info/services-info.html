<div class="body">
    <!-- Section to display the list of existing services -->
    <div class="list-container">
        <h2>Existing Services</h2>
        <div *ngIf= "isLoading">Loading services...</div>
        <div *ngIf= "errorMessage" class="message error">{{ errorMessage }}</div>
        <div *ngIf= "!isLoading && services.length === 0">No services found. Add one below!</div>

        <div class="services-list" *ngIf="!isLoading && services.length > 0">
            <!-- Loop through the services array -->
            <div class="list-item" *ngFor="let service of services">
                <div class="list-item-header">
                    <h3 class="list-item-title"><i [class]="service.icon"></i> {{ service.title }}</h3>
                    <div class="list-item-actions">
                        <!-- Edit and Delete buttons call component methods -->
                        <button type="button" class="btn-small btn-edit" (click)="editService(service)">Edit</button>
                        <button type="button" class="btn-small btn-delete" (click)="deleteService(service._id)">Delete</button>
                    </div>
                </div>
                <p class="list-item-description">{{ service.description }}</p>
            </div>
        </div>
    </div>

    <!-- Section for the Add/Edit form -->
    <div class="form-container">
      <form [formGroup]="myForm" (ngSubmit)="submitForm()">
        <!-- The form title changes based on the mode -->
        <h2>{{ isEditMode ? 'Edit Service' : 'Add New Service' }}</h2>
        
        <!-- Service Title Input -->
        <div class="form-group">
          <label for="title">Service Title</label>
          <input type="text" id="title" placeholder="e.g., Web Development" formControlName="title">
          <div class="msg" *ngIf= "myForm.get('title')?.invalid && myForm.get('title')?.touched">
            <span>Title is required and must be at least 3 characters.</span>
          </div>
        </div>

        <!-- Icon Input -->
        <div class="form-group">
          <label for="icon">Icon URL</label>
          <input type="text" id="icon" placeholder="e.g., https://example.com/icon.png" formControlName="icon">
           <div class="msg" *ngIf="myForm.get('icon')?.invalid && myForm.get('icon')?.touched">
            <span>Icon URL is required.</span>
          </div>
        </div>
        
        <!-- Description Textarea -->
        <div class="form-group">
          <label for="description">Description</label>
          <textarea id="description" rows="4" placeholder="Describe the service" formControlName="description"></textarea>
           <div class="msg" *ngIf="myForm.get('description')?.invalid && myForm.get('description')?.touched">
            <span>Description is required.</span>
          </div>
        </div>
        
        <!-- The submit button text and a "Cancel Edit" button change based on the mode -->
        <div class="form-group text-center form-actions">
          <input type="submit" [value]="isEditMode ? 'Update Service' : 'Save Service'" [disabled]="myForm.invalid"/>
          <button *ngIf= "isEditMode" type="button" class="btn-secondary" (click)="resetForm()">Cancel Edit</button>
        </div>
      </form>
    </div>
</div>